<!--
title: 【django】静的ファイルの扱い方：cssやjavascriptを読み込む方法
tags: python,django
id: 
private: false
-->

## 静的ファイルの役割と必要性とは？

静的ファイルとは、ウェブアプリケーションのデザインや振る舞いを制御するために使用されるファイルのことです。一般的な静的ファイルの種類には、cssファイル（スタイルシート）、javascriptファイル、画像ファイルなどがあります。これらのファイルは、ウェブページの見た目や操作性を向上させるために非常に重要です。

### 静的ファイルの役割

静的ファイルは、ウェブアプリケーションの外観や動作に関する情報を提供します。たとえば、cssファイルはウェブページのスタイルやレイアウトを定義し、javascriptファイルはユーザーとのインタラクションや動的な要素を制御します。また、画像ファイルはウェブページの視覚的な要素を追加します。

静的ファイルは、ウェブページの読み込み速度やパフォーマンスにも影響を与えます。これらのファイルを適切に圧縮し、ブラウザのキャッシュを利用することで、ユーザーエクスペリエンスを向上させることができます。

### 静的ファイルの必要性

ウェブアプリケーションでは、静的ファイルを使用することで以下のようなメリットがあります。

1. デザインの柔軟性：cssファイルを使用することで、ウェブページのスタイルやレイアウトを簡単に変更できます。これにより、一貫性のあるデザインを実現することができます。

2. ユーザビリティの向上：javascriptファイルを使用することで、動的な要素やユーザーとのインタラクションを実現することができます。これにより、ユーザビリティを向上させることができます。

3. 読み込み速度の向上：静的ファイルを適切に圧縮し、ブラウザのキャッシュを活用することで、ウェブページの読み込み速度を向上させることができます。これにより、ユーザーエクスペリエンスを向上させることができます。

以上のような理由から、静的ファイルの適切な扱い方を学ぶことは、ウェブアプリケーションの開発において非常に重要です。

参考記事：
- [【初心者向け】djangoで静的なウェブサイトを作る方法](https://qiita.com/kojiro_ueda/items/b8bcdc2f371295f2229c)
- [djangoの静的ファイルの設定まとめ](https://qiita.com/odaihiro/items/394a1b11a35de1721e4f)

## djangoで静的ファイルを扱う方法とは？

djangoでは、静的ファイルの扱いに特化した機能が提供されています。静的ファイルを扱うための主な手法は以下の通りです。

1. `static_root`の設定

静的ファイルを集約するためのディレクトリを指定する`static_root`の設定が必要です。この設定は`settings.py`ファイルで行われ、静的ファイルがデプロイされる場所を指定します。

例えば、`static_root = os.path.join(base_dir, 'static')`のように設定します。この場合、`static`ディレクトリがプロジェクトのルートディレクトリに作成され、静的ファイルがこのディレクトリにコピーされます。

2. `static_url`の設定

静的ファイルのurlを指定する`static_url`の設定も必要です。この設定は`settings.py`ファイルで行われ、静的ファイルが公開されるurlを指定します。

例えば、`static_url = '/static/'`のように設定します。この場合、静的ファイルは`/static/`以下のurlでアクセスできるようになります。

3. `collectstatic`コマンドの実行

プロジェクトがデプロイされる際に、静的ファイルを収集するために`collectstatic`コマンドを実行する必要があります。このコマンドは、設定した`static_root`に静的ファイルをコピーします。

`python manage.py collectstatic`というコマンドを実行することで、静的ファイルが収集されます。

4. テンプレート内での静的ファイルの読み込み

htmlテンプレート内で、静的ファイルを読み込むためには次のように記述します。

```html
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<script src="{% static 'js/script.js' %}"></script>
```

`{% static 'パス/ファイル名' %}`という形式で指定します。このようにしてテンプレート内で静的ファイルを読み込むことができます。

参考記事：
- [djangoで静的ファイル (画像, css, js) を使う方法](https://qiita.com/oyoshi/items/b5cdc1adf8f464e550a5)
- [django 3.2 で静的ファイルを取り扱う方法](https://codelab.website/django/2624/)

## 静的ファイルの配置場所とディレクトリ構成の決め方

静的ファイルの配置場所とディレクトリ構成は、プロジェクトの規模や要件によって異なりますが、一般的なアプローチを紹介します。

### プロジェクトレベルでの静的ファイル

プロジェクトレベルでは、共通の静的ファイルを配置することがあります。たとえば、プロジェクト全体の設定や共有コンポーネントに関連するスタイルシートやスクリプトなどです。

このような場合は、プロジェクトのルートディレクトリに`static`ディレクトリを作成し、そこに静的ファイルを配置します。

### アプリケーションレベルでの静的ファイル

アプリケーションレベルでは、各アプリケーションに関連する静的ファイルを配置します。たとえば、特定のアプリケーションに固有のスタイルシートやスクリプトなどです。

このような場合は、各アプリケーションのディレクトリ内に`static`ディレクトリを作成し、そこに静的ファイルを配置します。

また、アプリケーションレベルの静的ファイルは、プロジェクトレベルの静的ファイルと同様に`collectstatic`コマンドで収集することができます。

### 静的ファイルのディレクトリ構成

静的ファイルのディレクトリ構成は、プロジェクトの要件や予想される変更の頻度によって異なります。一般的なアプローチとしては、次のような構成が考えられます。

```
static/
|_ css/
|  |_ style.css
|
|_ js/
|  |_ script.js
|
|_ img/
   |_ logo.png
```

上記の例では、`static`ディレクトリ内に`css`、`js`、`img`というディレクトリを作成し、その中に各種静的ファイルを配置しています。

このようにディレクトリを分けることで、静的ファイルの管理やメンテナンスが容易になります。

参考記事：
- [django静的ファイルのディレクトリ構成を考えてみた](https://qiita.com/kensuke-mitsuzawa/items/dd0e6916f817ae0f5490)
- [djangoの静的ファイル配置](https://qiita.com/okoppe8/items/14e22220a253f2f5dc41)

## cssファイルの読み込み方法とは？

cssファイルを読み込む方法は、以下の手法があります。

1. 相対パスを指定する

htmlテンプレート内で、cssファイルを読み込むためには、相対パスで指定することが一般的です。次のように記述します。

```html
<link rel="stylesheet" href="path/to/style.css">
```

この場合、`path/to/style.css`はhtmlテンプレートファイルからの相対パスで指定します。たとえば、`static`ディレクトリ内の`css`ディレクトリに`style.css`がある場合、`href="css/style.css"`となります。

2. djangoテンプレートタグを使用する

djangoでは、テンプレート内で静的ファイルを扱うためのテンプレートタグが提供されています。これを使用することで、静的ファイルのurlを動的に生成することができます。

次のように記述します。

```html
<link rel="stylesheet" href="{% static 'path/to/style.css' %}">
```

`{% static 'path/to/style.css' %}`という形式で指定します。このようにすることで、djangoが静的ファイルのurlを自動的に生成してくれます。

また、djangoの静的ファイルの設定に応じて、urlのプレフィックスなどを指定することもできます。

参考記事：
- [djangoでcssを読み込む方法](https://qiita.com/surface_red/items/2a79f8bea3ca7c762b0a)
- [djangoでcssを読み込む方法](https://qiita.com/sacrubyuma/items/3b51f64d2d9a3e7d0629)

## javascriptファイルの読み込み方法とは？

javascriptファイルを読み込む方法は、以下の手法があります。

1. 相対パスを指定する

htmlテンプレート内で、javascriptファイルを読み込むためには、相対パスで指定することが一般的です。次のように記述します。

```html
<script src="path/to/script.js"></script>
```

この場合、`path/to/script.js`はhtmlテンプレートファイルからの相対パスで指定します。たとえば、`static`ディレクトリ内の`js`ディレクトリに`script.js`がある場合、`src="js/script.js"`となります。

2. djangoテンプレートタグを使用する

djangoでは、テンプレート内で静的ファイルを扱うためのテンプレートタグが提供されています。javascriptファイルのurlを動的に生成するためには、このテンプレートタグを使用します。

次のように記述します。

```html
<script src="{% static 'path/to/script.js' %}"></script>
```

`{% static 'path/to/script.js' %}`という形式で指定します。このようにすることで、djangoが静的ファイルのurlを自動的に生成してくれます。

参考記事：
- [djangoでjavascriptを読み込む方法](https://qiita.com/kiyodori/items/bcbfc671b702f3fd3163)
- [【初心者向け】djangoでのjavascriptの読み込み方](https://qiita.com/yuuna/items/1121dfe4c3e19ce5e07f)

## 静的ファイルのキャッシュの扱い方とは？

静的ファイルのキャッシュは、ユーザーエクスペリエンスとパフォーマンスの向上に寄与します。キャッシュを活用することで、静的ファイルの再ダウンロードや読み込み時間を節約することができます。

静的ファイルのキャッシュを扱うためには、以下の方法があります。

1. ブラウザキャッシュの活用

ブラウザキャッシュは、静的ファイルを一定期間保存する仕組みです。キャッシュが有効な場合、同じファイルが再利用されるため、ファイルの再ダウンロードや読み込み時間が削減されます。

ブラウザキャッシュの活用には、静的ファイルのurlにバージョン番号やタイムス

　

## Django 関連のまとめ
https://hack-note.com/summary/django-summary/

　

## オンラインスクールを講師として活用する！
https://hack-note.com/programming-schools/

　

## 0円でプログラミングを学ぶという選択
- [techacademyの無料体験](//af.moshimo.com/af/c/click?a_id=2612475&amp;p_id=1555&amp;pc_id=2816&amp;pl_id=22706&amp;url=https%3a%2f%2ftechacademy.jp%2fhtmlcss-trial%3futm_source%3dmoshimo%26utm_medium%3daffiliate%26utm_campaign%3dtextad)
- [オンラインスクール dmm webcamp pro](//af.moshimo.com/af/c/click?a_id=2612482&amp;p_id=1363&amp;pc_id=2297&amp;pl_id=39999&amp;guid=on)
- [レバテックカレッジ｜大学生向け 無料説明会](//af.moshimo.com/af/c/click?a_id=4071793&p_id=3198&pc_id=7488&pl_id=41848)

